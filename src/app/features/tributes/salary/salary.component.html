<h1>Compute your net salary</h1>
<div class="row">
  <div class="col">
    <form [formGroup]="salaryFormGroup" (submit)="onSubmit()">
      <div class="row my-5">
        <mat-form-field appearance="outline">
          <mat-label>Gross Annual Salary</mat-label>
          <input
            matInput
            class="salary-input"
            type="number"
            placeholder="0"
            min="0"
            formControlName="grossSalaryFormControl"
            step="10000"
            (change)="this.onGrossSalaryChange()"
          />
          <span matTextPrefix>&#8364;</span>
          <mat-icon matSuffix>sentiment_very_satisfied</mat-icon>
          <mat-hint>Insert here Gross Annual Salary</mat-hint>
        </mat-form-field>
      </div>
      <div class="row my-5">
        <mat-label>Social Security Contributions Rate</mat-label>
        <mat-slider
          class="mx-auto"
          [discrete]="true"
          min="1"
          max="100"
          step="1"
          [displayWith]="formatLabel"
        >
          <input
            formControlName="socialSecurityContributionsRateFormControl"
            (change)="onSocialSecurityContributionRateChange()"
            matSliderThumb
          />
        </mat-slider>
        <mat-hint
          >Insert the employee social security contributions rate</mat-hint
        >
      </div>
      <div class="row my-5">
        <div class="row">
          <mat-form-field>
            <mat-label>Strategy</mat-label>
            <mat-select
              formControlName="incomeTaxStrategyFormControl"
              [(ngModel)]="this.selectedIncomeTaxStrategy"
            >
              @for (item of incomeTaxStrategyList; track $index) {
                <mat-option [value]="item">{{ item.name }}</mat-option>
              }
            </mat-select>
          </mat-form-field>
        </div>
        <div class="row">
          <mat-accordion>
            <mat-expansion-panel hideToggle>
              <mat-expansion-panel-header>
                <mat-panel-title>Strategy Details</mat-panel-title>
                <mat-panel-description>
                  Look into details how the income tax is computed
                </mat-panel-description>
              </mat-expansion-panel-header>
              @if (isItaly2024Selected()) {
                <h4>{{ selectedIncomeTaxStrategy.name }}</h4>
                <app-brackets-detail
                  [taxableIncome]="incomeBeforeTaxation"
                  (incomeTaxAmountChangedEvent)="
                    this.onIncomeTaxationChange($event)
                  "
                ></app-brackets-detail>
              }
              @if (isCustomStrategySelected()) {
                <mat-form-field appearance="outline">
                  <mat-label class="mx-auto">Income Taxation Rate</mat-label>
                  <input
                    matInput
                    class="salary-input"
                    type="number"
                    placeholder="0"
                    min="0"
                    formControlName="incomeTaxationRateFormControl"
                    step="0.1"
                    (change)="onIncomeTaxationSliderChange()"
                  />
                  <span matTextSuffix>&#37;</span>
                  <mat-hint>Insert the rate for income tax</mat-hint>
                </mat-form-field>
              }
            </mat-expansion-panel>
          </mat-accordion>
        </div>
      </div>
      <div class="row my-5">
        <mat-form-field appearance="outline">
          <mat-label>Number of payments (per year)</mat-label>
          <input
            matInput
            class="salary-input"
            type="number"
            placeholder="0"
            min="0"
            formControlName="installmentNumberPerYearFormControl"
            step="1"
            (change)="this.onInstallmentNumberPerYearChange()"
          />
          <mat-hint>Insert the number of payments per year</mat-hint>
        </mat-form-field>
      </div>
    </form>
  </div>
  <div class="col">
    <app-summary
      [grossSalary]="grossSalary"
      [socialSecurityEmployeeContributionsAmount]="socialSecurityContributions"
      [socialSecurityEmployeeContributionsRate]="
        socialSecurityEmployeeContribution
      "
      [incomeBeforeTaxationAmount]="incomeBeforeTaxation"
      [incomeTaxationAmount]="incomeTaxAmount"
      [incomeTaxationRate]="incomeTaxationRate"
      [incomeAfterTaxationAmount]="incomeAfterTaxation"
      [netPeriodicSalaryAmount]="netPeriodicSalary"
    ></app-summary>
  </div>
</div>
